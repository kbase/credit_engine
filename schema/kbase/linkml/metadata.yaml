id: https://kbase/credit_engine/schema/metadata
name: metadata
description: Schema for KBase resource metadata
prefixes:
  linkml: https://w3id.org/linkml/
  schema: http://schema.org/
  ORCID: https://orcid.org/
  credit: https://casrai.org/credit/
  datacite: https://purl.org/datacite/v4.4
  biolink: https://biolink.github.io/biolink-model/docs/
  crossref: https://crossref.org/
imports:
  - linkml:types
default_range: string

classes:

  Resource:
    attributes:
      identifier:
        description: resolvable persistent unique ID for the resource
        identifier: true
        range: ResolvablePID
        required: true
        exact_mappings:
        - DataCite:Resource.identifier

      resource_type:
        description: the type of resource being described
        range: ResourceType
        required: true
        exact_mappings:
        - DataCite:Resource.ResourceType

      title:
        description: formal title(s) of the data set
        multivalued: true
        exact_mappings:
        - DataCite:Resource.Titles.Title

      version:
        description: resource version (if available)
        exact_mappings:
        - DataCite:Resource.version

      submission_date:
        description: for unversioned datasets, date of submission to repository (if available)
        exact_mappings:
        - DataCite:Resources.Dates.Date[date_type="SUBMITTED"]
        range: date_or_datetime

      access_date:
        # date in epoch time?
        description: for unversioned datasets, the date of access of the dataset
        range: date_or_datetime
        examples:
        - 2022-05-10


      contributors:
        description: people and/or organisations responsible for generating the dataset
        multivalued: true
        range: Person
        exact_mappings:
        - DataCite:Resource.Contributors
        - DataCite:Resource.Creators

      related_identifiers:
        description: other resolvable persistent unique IDs used to access the resource or related resources
        multivalued: true
        range: ResolvablePID
        exact_mappings:
        - DataCite:Resource.RelatedIdentifiers
        - DataCite:Resource.AlternateIdentifier

      funding:
        description: funding sources for the dataset
        inlined_as_list: true
        multivalued: true
        range: FundingReference
        exact_mappings:
        - DataCite:Resource.FundingReferences
        close_mappings:
        - CrossRef:Message.project.funding

      license:
        description: license under which the data is made available
        slot_uri: biolink:license


  Person:
    attributes:
      orcid:
        identifier: true
        description: ORCID
        range: uriorcurie

      first_name:
        description: given name
        exact_mappings:
        - DataCite:Resource.Contributors.Contributor.given_name

      last_name:
        description: family name
        exact_mappings:
        - DataCite:Resource.Contributors.Contributor.family_name

      full_name:
        description: Full name of the contributor
        # slot_uri: schema:name
        equals_expression: "{first_name} + {last_name}"
        exact_mappings:
        - DataCite:Resource.Contributors.Contributor.ContributorName.value  # CHECK!
        # DataCite:Resource.Creators.Creator.CreatorName["Personal"].value

      affiliations:
        description: organisation(s) that the contributor is associated with
        inlined_as_list: true
        multivalued: true
        range: Organisation
        exact_mappings:
        - DataCite:Resource.Contributors.Contributor.affiliation

      contributor_roles:
        description: List of one or more terms indicating the type of contribution. Should be a term from either CRedIT or DataCite
        multivalued: true
        inlined_as_list: true
        exact_mappings:
        - DataCite:Resource.Contributors.Contributor.contributor_type
        todos: add list of valid terms!


  Organisation:
    description: an organization such as a company, university, or consortium
    class_uri: schema:Organization

    attributes:
      organisation_id:
        description: unique identifier for the organisation -- ROR / ISNI, etc.
        identifier: true
        exact_mappings:
        - DataCite:Affiliation.affiliation_identifier
        range: uriorcurie

      organisation_name:
        description: name of the organisation
        exact_mappings:
        - DataCite:Affiliation.value


  FundingReference:
    attributes:
      funder_name:
        description: human-readable funding body name
        required: true
        exact_mappings:
        - DataCite:Resource.FundingReferences.FundingReference.funder_name
        - CrossRef:Message.project.funding.funder.name

      funder_id:
        description: ID for the funding entity - acceptable formats include crossref funder ID, DOI, ROR, ISNI, others?
        exact_mappings:
        - DataCite:Resource.FundingReferences.FundingReference.FunderIdentifier.value
        - CrossRef:Message.project.funding.funder.id.id
        range: uriorcurie

      award_id:
        description: code assigned by the funder to the grant or award
        exact_mappings:
        - DataCite:Resource.FundingReferences.FundingReference.AwardNumber.value
        - CrossRef:Message.award

      award_title:
        description: human-readable title of the grant or award
        exact_mappings:
        - DataCite:Resource.FundingReferences.FundingReference.award_title

      award_uri:
        description: URI for the award
        exact_mappings:
        - DataCite:Resource.FundingReferences.FundingReference.AwardNumber.award_uri
        range: uriorcurie


  ResolvablePID:
    attributes:
      id:
        identifier: true
        description: a CURIE (compact URI)
        required: true
        exact_mappings:
        - DataCite:Resource.identifier.value
        - DataCite:Resource.AlternateIdentifiers.AlternateIdentifier.value
        - DataCite:Resource.RelatedIdentifiers.RelatedIdentifier.value
        range: uriorcurie

      uri:
        description: URI for a resource
        range: uriorcurie

      description:
        description: brief description of what the ID links to
        # slot_uri: schema:description
        exact_mappings:
        - DataCite:ResourceType  # ???

      relation_type:
        description: how the resource represented by this ID relates to the original resource
        exact_mappings:
        - DataCite:RelationType # also need to represent the resource itself

enums:
  ResourceType:
    permissible_values:
      dataset:

  ContributorType:
    permissible_values:
      Person:
      Organisation:
